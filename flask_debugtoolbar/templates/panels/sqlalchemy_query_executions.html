<div class="flDebugPanelTitle">
	<a class="flDebugClose flDebugBack" href="">Back</a>
	<h3>Query Executions</h3>
</div>
<div class="flDebugPanelContent">
	<div class="scroll">
        <h4>Query #{{ query_data.query_id }}</h4>
		<div style="font-size: 12px; background: none; font-family: Consolas, Monaco, monospace; border: 1px solid #BBB" class="code">{{ query_data.sql|safe }}</div>
        <table class="tablesorter">
            <thead>
                <tr>
                    <th>Execution&nbsp;#</th>
                    <th>Time&nbsp;(ms)</th>
                    <th>Params</th>
                    <th>Action</th>
                    <th>User Code Context</th>
                </tr>
            </thead>
            <tbody>
                {% for execution in query_data.executions %}
                    <tr class="{{ loop.cycle('flDebugOdd', 'flDebugEven') }}">
                        <td>{{ execution.exec_nr }}</td>
                        <td>{{ '%.1f'|format(execution.duration * 1000) }}</td>
                        <td>{{ execution.parameters }}</td>
                        <td>
                          {% if execution.signed_query %}
                              <a class="remoteCall" href="/_debug_toolbar/views/sqlalchemy/sql_select?query={{ execution.signed_query }}&amp;duration={{ execution.duration|urlencode }}">SELECT</a><br />
                              <a class="remoteCall" href="/_debug_toolbar/views/sqlalchemy/sql_explain?query={{ execution.signed_query }}&amp;duration={{ execution.duration|urlencode }}">EXPLAIN</a><br />
                          {% endif %}
                        </td>
                        <td>
                          {% for level in execution.shortened_stack %}
                            {{ level }}<br />
                          {% endfor %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
	</div>
</div>

